# Segmentation of Neuron Bundles from Diffusion MRI

## Project Description
Project for Statistical Learning Theory Course at ETH Zurich by Antonio Orvieto, Moisés Torres García and Sjoerd van Bekhoven.

## Repository Structure
* code/
  * data/ 
* literature/
  * papers/
* report/

## Pre-processing
You can either do the pre-processing yourself, or download the following two files and place them in "code/data":
* embeddings (download at https://drive.google.com/file/d/0B-BbrQ1IXzeqa2drbkQyaTBjZ0E)
* FA (download at https://drive.google.com/open?id=0B-BbrQ1IXzeqSmpZek1jT1RWZVU)

If you want to do the pre-processing yourself, follow these steps:

1. Make sure the following files are present in the folder "code/data/":
  * embeddings
  * diff_data.nii.gz
2. Add the "NIfTI" MATLAB library to your path (download at http://ch.mathworks.com/matlabcentral/fileexchange/8797-tools-for-nifti-and-analyze-image)
3. In "code/preprocessing/main.m", check if all paths are correctly for your system (they should be right away) and run all sections subsequently.
4. Make sure the files "embeddings" and "FA" generated by the script are in the folder "code/data/".

## Instructions
Make sure that in the folder "code/data/" the following files are present (see steps under pre-processing):
  * embeddings
  * diff_data.nii.gz

1. First, we create a subset of the data to run the algorithm on. Do this by opening "code/subset.py" and change the global variables x\_sub, y\_sub and z\_sub to the subset you want. Then, run the file. This will create three files in the folder "code/data/": "dim\_sub.npy" , "embedding\_sub.npy" and "FA\_sub.npy".
2. We are ready for the Svendsen-Wang Monte Carlo algorithm, located in "code/swmc.py". At the top of the file there are a couple of variables which you can change, such as the number of runs per temperature, the number of Pot spin variables etc. If you have configured the way you want, you can run the file. This will create a file in the folder "code/results/" in the format "results_{ddmmyyhhss}.pkl".
3. For the actual clustering we want to analyze the susceptibility of the different temperatures in the MC algorithm. To do so, open the file "code/phase_analysis.py" and change the global variable id to the {ddmmyyhhss} beloning to your results and run the file to see the susceptibility plot.
4. ...
